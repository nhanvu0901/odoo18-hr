<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="custom_hr_module.HROnboardingReportTemplate">
        <div class="hr-onboarding-report o_content">
            <div class="report-header mb-3" style="display: flex;justify-content: space-between;">
                <div>
                    <h2> HR Employee Trend</h2>
                    <div class="report-filters">
                    <span><strong>Period:</strong>
                        <t t-esc="date_from"/>
                        to
                        <t t-esc="date_to"/></span>
                        <span class="ms-3"><strong>Departments:</strong>
                            <t t-esc="departments.join(', ')"/></span>
                    </div>

                </div>
                <div>
                    <button class="btn btn-outline-primary me-2" t-on-click="openWizardForm">
                         New Report
                    </button>
                </div>
            </div>


            <div t-if="!reportData || Object.keys(reportData).length === 0" class="alert alert-warning" role="alert">
                <i class="fa fa-exclamation-triangle"></i>
                <strong>No Data Available</strong>
                <p class="mb-0">No report data found. Please generate a new report using the "New Report" button above.</p>
            </div>

            <div t-if="reportData &amp;&amp; Object.keys(reportData).length > 0">
                <div class="row mb-4">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5>Onboarding by Department</h5>
                            </div>
                            <div class="card-body">
                                <canvas t-ref="onboardingChart" width="400" height="300"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5>Departure by Department</h5>
                            </div>
                            <div class="card-body">
                                <canvas t-ref="offboardingChart" width="400" height="300"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h5>Employee Details</h5>
                        <div class="btn-group" role="group">
                            <input type="radio" class="btn-check" name="reportType" id="onboarding"
                                   t-att-checked="currentReportType === 'onboarding'"
                                   t-on-change="switchReportType" value="onboarding"/>
                            <label class="btn btn-outline-primary" for="onboarding">Onboarding</label>

                            <input type="radio" class="btn-check" name="reportType" id="offboarding"
                                   t-att-checked="currentReportType === 'offboarding'"
                                   t-on-change="switchReportType" value="offboarding"/>
                            <label class="btn btn-outline-primary" for="offboarding">Departure </label>
                        </div>
                    </div>
                    <div class="card-body" style="max-height: 300px; overflow-y: auto;padding:0 !important;">
                        <table class="table table-striped">
                            <thead style="position: sticky; top: 0; background-color: #fff; z-index: 10;">
                                <tr>
                                    <th style="position: sticky; top: 0; background-color: #f8f9fa; border-bottom: 2px solid #dee2e6;">Employee Name</th>
                                    <th style="position: sticky; top: 0; background-color: #f8f9fa; border-bottom: 2px solid #dee2e6;">Department</th>
                                    <th style="position: sticky; top: 0; background-color: #f8f9fa; border-bottom: 2px solid #dee2e6;">Job Title</th>
                                    <th style="position: sticky; top: 0; background-color: #f8f9fa; border-bottom: 2px solid #dee2e6;">Onboarding Date</th>
                                    <th style="position: sticky; top: 0; background-color: #f8f9fa; border-bottom: 2px solid #dee2e6;">Departure Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr t-foreach="currentEmployeeData" t-as="employee" t-key="employee_index">
                                    <td><t t-esc="employee.employee_name"/></td>
                                    <td><t t-esc="employee.department"/></td>
                                    <td><t t-esc="employee.job_title"/></td>
                                    <td><t t-esc="employee.start_date"/></td>
                                    <td><t t-esc="employee.end_date"/></td>
                                </tr>
                            </tbody>
                        </table>
                        <div t-if="!currentEmployeeData.length" class="text-center text-muted py-4">
                            No employee data available for the selected period and departments.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </t>
</templates>